{{#extend "main"}}
{{#content "body"}}

<h2>Comments</h2>

{{#if comments.length}}
  <div class="comments">
    {{#each comments}}
      <div class="comment">
        <p>{{this.content}}</p>
        <p>Posted by: {{this.User.username}}</p>
        <p>At: {{formatDate this.createdAt}}</p>
      </div>
    {{/each}}
  </div>
{{else}}
  <p>No comments yet.</p>
{{/if}}

{{#if logged_in}}
  <form action="/api/comments" method="POST">
    <textarea id="comment_content" name="content" placeholder="Add a comment..." required></textarea>
    <input type="hidden" name="postId" value="{{postId}}"> 
    <button type="submit">Submit Comment</button>
  </form>
{{/if}}

{{/content}}
{{/extend}}
